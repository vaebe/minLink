# MinLink é¡¹ç›®ä¸Šä¸‹æ–‡æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

MinLink æ˜¯ä¸€ä¸ªç°ä»£åŒ–ã€é«˜æ€§èƒ½çš„çŸ­é“¾æœåŠ¡ï¼Œä¸“ä¸ºåˆ›ä½œè€…å’Œä¼ä¸šæ‰“é€ ã€‚è¯¥é¡¹ç›®æä¾›çŸ­é“¾ç”Ÿæˆã€è®¿é—®è¿½è¸ªã€æ•°æ®åˆ†æç­‰åŠŸèƒ½ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„å…¨æ ˆæŠ€æœ¯æ ˆæ„å»ºã€‚

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

**å‰ç«¯**:
- **æ¡†æ¶**: Next.js 16.1.4 (React 19.2.3, App Router)
- **è¯­è¨€**: TypeScript 5.9.3
- **æ ·å¼**: Tailwind CSS 4.1.18
- **UI ç»„ä»¶**: shadcn/ui (Radix UI primitives, New York é£æ ¼)
- **å›¾æ ‡**: lucide-react 0.563.0
- **åŠ¨ç”»**: framer-motion 12.29.2, tw-animate-css 1.4.0
- **æ•°æ®å¯è§†åŒ–**: Recharts 3.7.0
- **é€šçŸ¥**: sonner 2.0.7

**åç«¯ & æ•°æ®**:
- **BaaS**: Supabase 2.93.2 (PostgreSQL + Auth + Storage)
- **SSR æ”¯æŒ**: @supabase/ssr 0.8.0
- **çŠ¶æ€ç®¡ç†**: React Server Actions
- **è¡¨å•éªŒè¯**: Zod 4.3.6
- **ID ç”Ÿæˆ**: nanoid 5.1.6
- **äºŒç»´ç **: qrcode.react 4.2.0

**å·¥å…·é“¾**:
- **åŒ…ç®¡ç†å™¨**: pnpm
- **ä»£ç æ£€æŸ¥**: ESLint 9.39.2 (eslint-config-next)
- **æäº¤è§„èŒƒ**: commitlint 20.3.1 (Conventional Commits)
- **Git Hooks**: simple-git-hooks 2.13.1, lint-staged 16.2.7
- **æ ·å¼å·¥å…·**: class-variance-authority 0.7.1, clsx 2.1.1, tailwind-merge 3.4.0
- **ä¸»é¢˜**: next-themes 0.4.6
- **SVG å¤„ç†**: mini-svg-data-uri 1.4.4

### ä¸»è¦ç‰¹æ€§

- ğŸš€ æé€Ÿç”ŸæˆçŸ­é“¾ï¼ˆå¹³å‡ç”Ÿæˆæ—¶é—´ < 50msï¼‰
- ğŸ“Š è®¿é—®æ•°æ®åˆ†æï¼ˆè®¿é—®è¶‹åŠ¿ã€åœ°ç†ä½ç½®ã€æ¥æºåˆ†æã€è®¾å¤‡ä¿¡æ¯ï¼‰
- ğŸ”’ ä¼ä¸šçº§å®‰å…¨ï¼ˆRow Level Securityï¼‰
- ğŸŒ å…¨çƒåŠ é€Ÿï¼ˆEdge Networkï¼‰
- ğŸ” ç”¨æˆ·è®¤è¯ï¼ˆSupabase Authï¼‰
- ğŸ“± å“åº”å¼è®¾è®¡
- ğŸ¨ ç²¾ç¾ UIï¼ˆåŸºäº shadcn/uiï¼‰
- ğŸ“ˆ æ¨¡å—åŒ–å›¾è¡¨ç»„ä»¶æ¶æ„

## é¡¹ç›®ç»“æ„

```
min-link/
â”œâ”€â”€ app/                      # Next.js App Router é¡µé¢
â”‚   â”œâ”€â”€ actions.ts           # Server Actions (createLink, updateLink, deleteLink, updateLinkState)
â”‚   â”œâ”€â”€ layout.tsx           # æ ¹å¸ƒå±€ï¼ˆåŒ…å«å…¨å±€æ ·å¼ã€å­—ä½“ã€å…ƒæ•°æ®ï¼‰
â”‚   â”œâ”€â”€ page.tsx             # é¦–é¡µ
â”‚   â”œâ”€â”€ globals.css          # å…¨å±€æ ·å¼ï¼ˆåŒ…å« Tailwind CSS 4.0 @theme é…ç½®ï¼‰
â”‚   â”œâ”€â”€ [shortCode]/         # çŸ­é“¾é‡å®šå‘è·¯ç”±
â”‚   â”‚   â””â”€â”€ route.ts         # å¤„ç†çŸ­é“¾é‡å®šå‘å’Œè®¿é—®è®°å½•
â”‚   â”œâ”€â”€ auth/                # è®¤è¯ç›¸å…³è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth-code-error/ # è®¤è¯é”™è¯¯é¡µé¢
â”‚   â”‚   â””â”€â”€ callback/        # OAuth å›è°ƒå¤„ç†
â”‚   â”‚       â””â”€â”€ route.ts     # å›è°ƒå¤„ç†é€»è¾‘
â”‚   â”œâ”€â”€ dashboard/           # ç”¨æˆ·ä»ªè¡¨ç›˜
â”‚   â”‚   â””â”€â”€ page.tsx         # ä»ªè¡¨ç›˜é¡µé¢
â”‚   â”œâ”€â”€ explore/             # æ¢ç´¢é¡µé¢ï¼ˆå…¬å¼€é“¾æ¥å±•ç¤ºï¼‰
â”‚   â”‚   â””â”€â”€ page.tsx         # æ¢ç´¢é¡µé¢
â”‚   â”œâ”€â”€ analytics/           # æ•°æ®åˆ†æé¡µé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx         # åˆ†æä¸»é¡µé¢
â”‚   â”‚   â””â”€â”€ _components/     # åˆ†æç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ analytics-header.tsx  # åˆ†æå¤´éƒ¨
â”‚   â”‚       â””â”€â”€ top-list-card.tsx     # é¡¶éƒ¨åˆ—è¡¨å¡ç‰‡
â”‚   â””â”€â”€ links/               # é“¾æ¥è¯¦æƒ…é¡µé¢
â”‚       â””â”€â”€ [id]/
â”‚           â”œâ”€â”€ page.tsx     # é“¾æ¥è¯¦æƒ…
â”‚           â””â”€â”€ visits/      # è®¿é—®è®°å½•è¯¦æƒ…
â”‚               â””â”€â”€ page.tsx # è®¿é—®è®°å½•é¡µé¢
â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                  # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ avatar.tsx       # å¤´åƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ badge.tsx        # å¾½ç« ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ button.tsx       # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ card.tsx         # å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ chart.tsx        # å›¾è¡¨ç»„ä»¶å…¥å£ï¼ˆå¯¼å‡ºç±»å‹å’Œç»„ä»¶ï¼‰
â”‚   â”‚   â”œâ”€â”€ dialog.tsx       # å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx # ä¸‹æ‹‰èœå•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ input.tsx        # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ label.tsx        # æ ‡ç­¾ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ popover.tsx      # å¼¹å‡ºæ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ select.tsx       # é€‰æ‹©å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ separator.tsx    # åˆ†éš”ç¬¦ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ sonner.tsx       # é€šçŸ¥ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ switch.tsx       # å¼€å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ table.tsx        # è¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â””â”€â”€ chart/           # å›¾è¡¨æ¨¡å—åŒ–ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ constants.ts # å›¾è¡¨å¸¸é‡ï¼ˆä¸»é¢˜é…ç½®ï¼‰
â”‚   â”‚       â”œâ”€â”€ container.tsx # å›¾è¡¨å®¹å™¨
â”‚   â”‚       â”œâ”€â”€ context.tsx  # å›¾è¡¨ä¸Šä¸‹æ–‡
â”‚   â”‚       â”œâ”€â”€ legend.tsx   # å›¾ä¾‹ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ payload.tsx  # æ•°æ®è½½è·
â”‚   â”‚       â”œâ”€â”€ style.tsx    # å›¾è¡¨æ ·å¼
â”‚   â”‚       â””â”€â”€ tooltip.tsx  # å·¥å…·æç¤ºç»„ä»¶
â”‚   â”œâ”€â”€ auth-buttons.tsx     # è®¤è¯æŒ‰é’®
â”‚   â”œâ”€â”€ create-link-dialog.tsx  # åˆ›å»ºé“¾æ¥å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ dashboard-client.tsx     # ä»ªè¡¨ç›˜å®¢æˆ·ç«¯ç»„ä»¶
â”‚   â”œâ”€â”€ hero-form.tsx        # é¦–é¡µè¡¨å•
â”‚   â”œâ”€â”€ home-hero.tsx        # é¦–é¡µ Hero åŒºåŸŸ
â”‚   â”œâ”€â”€ link-card.tsx        # é“¾æ¥å¡ç‰‡
â”‚   â”œâ”€â”€ link-details-header.tsx  # é“¾æ¥è¯¦æƒ…å¤´éƒ¨
â”‚   â”œâ”€â”€ link-grid.tsx        # é“¾æ¥ç½‘æ ¼
â”‚   â”œâ”€â”€ site-header.tsx      # ç½‘ç«™å¤´éƒ¨
â”‚   â”œâ”€â”€ site-header-wrapper.tsx  # ç½‘ç«™å¤´éƒ¨åŒ…è£…å™¨
â”‚   â”œâ”€â”€ visits-chart-section.tsx  # è®¿é—®å›¾è¡¨åŒºåŸŸ
â”‚   â”œâ”€â”€ visits-chart.tsx     # è®¿é—®å›¾è¡¨ç»„ä»¶
â”‚   â””â”€â”€ visits-chart-tooltip.tsx  # è®¿é—®å›¾è¡¨å·¥å…·æç¤º
â”œâ”€â”€ lib/                     # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ utils.ts             # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ analytics/           # æ•°æ®åˆ†æå·¥å…·
â”‚       â”œâ”€â”€ types.ts         # æ•°æ®åˆ†æç±»å‹å®šä¹‰
â”‚       â””â”€â”€ utils.ts         # æ•°æ®åˆ†æå·¥å…·å‡½æ•°ï¼ˆæ—¥æœŸçª—å£ã€URL æ„å»ºï¼‰
â”œâ”€â”€ utils/                   # å®ç”¨å·¥å…·
â”‚   â””â”€â”€ supabase/            # Supabase å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ client.ts        # æµè§ˆå™¨ç«¯å®¢æˆ·ç«¯
â”‚       â””â”€â”€ server.ts        # æœåŠ¡ç«¯å®¢æˆ·ç«¯
â”œâ”€â”€ supabase/                # Supabase é…ç½®
â”‚   â”œâ”€â”€ README.md            # Supabase ä½¿ç”¨è¯´æ˜
â”‚   â””â”€â”€ schema.sql           # æ•°æ®åº“ Schemaï¼ˆåŒ…å«è¡¨ã€ç­–ç•¥ã€å‡½æ•°ï¼‰
â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”‚   â””â”€â”€ favicon/             # ç½‘ç«™å›¾æ ‡
â”œâ”€â”€ proxy.ts                 # Next.js ä¸­é—´ä»¶ï¼ˆè®¤è¯ã€è·¯ç”±ä¿æŠ¤ï¼‰
â””â”€â”€ é…ç½®æ–‡ä»¶
    â”œâ”€â”€ next.config.ts       # Next.js é…ç½®ï¼ˆå®‰å…¨å¤´ã€ç¦ç”¨ X-Powered-Byï¼‰
    â”œâ”€â”€ tsconfig.json        # TypeScript é…ç½®ï¼ˆä¸¥æ ¼æ¨¡å¼ã€è·¯å¾„åˆ«å @/*ï¼‰
    â”œâ”€â”€ components.json      # shadcn/ui é…ç½®ï¼ˆNew York é£æ ¼ã€CSS å˜é‡ï¼‰
    â”œâ”€â”€ eslint.config.mjs    # ESLint é…ç½®ï¼ˆNext.js è§„åˆ™ï¼‰
    â”œâ”€â”€ commitlint.config.cjs # Commitlint é…ç½®ï¼ˆConventional Commitsï¼‰
    â””â”€â”€ postcss.config.mjs   # PostCSS é…ç½®
```

## æ•°æ®åº“æ¶æ„

### æ ¸å¿ƒè¡¨

#### `links` è¡¨
å­˜å‚¨çŸ­é“¾ä¿¡æ¯

**å­—æ®µ**:
- `id` (uuid, primary key): é“¾æ¥å”¯ä¸€æ ‡è¯†
- `created_at` (timestamptz): åˆ›å»ºæ—¶é—´
- `original_url` (text): åŸå§‹ URL
- `short_code` (text, unique): çŸ­ç ï¼ˆ6ä½éšæœºå­—ç¬¦ä¸²ï¼‰
- `user_id` (uuid, foreign key): æ‰€å±ç”¨æˆ· ID
- `is_public` (boolean): æ˜¯å¦å…¬å¼€
- `visits_count` (integer): è®¿é—®æ¬¡æ•°
- `title` (text, optional): é“¾æ¥æ ‡é¢˜
- `description` (text, optional): é“¾æ¥æè¿°
- `expires_at` (timestamptz, optional): è¿‡æœŸæ—¶é—´

**ç´¢å¼•**:
- `links_user_id_idx`: ç”¨æˆ· ID
- `links_short_code_idx`: çŸ­ç 
- `links_is_public_idx`: å…¬å¼€çŠ¶æ€

#### `visits` è¡¨
å­˜å‚¨è®¿é—®è®°å½•

**å­—æ®µ**:
- `id` (uuid, primary key): è®¿é—®è®°å½•å”¯ä¸€æ ‡è¯†
- `created_at` (timestamptz): è®¿é—®æ—¶é—´
- `link_id` (uuid, foreign key): å…³è”çš„é“¾æ¥ ID
- `user_agent` (text): ç”¨æˆ·ä»£ç†
- `ip` (inet): è®¿é—®è€… IP åœ°å€
- `country` (text): å›½å®¶
- `country_code` (text): å›½å®¶ä»£ç 
- `region_code` (text): åœ°åŒºä»£ç 
- `region_name` (text): åœ°åŒºåç§°
- `city` (text): åŸå¸‚
- `referrer` (text): æ¥æºé¡µé¢
- `device_type` (text): è®¾å¤‡ç±»å‹ï¼ˆmobile/desktop/botï¼‰
- `browser_name` (text): æµè§ˆå™¨åç§°
- `os_name` (text): æ“ä½œç³»ç»Ÿåç§°

**ç´¢å¼•**:
- `visits_link_id_idx`: é“¾æ¥ ID
- `visits_link_id_created_at_idx`: é“¾æ¥ ID + è®¿é—®æ—¶é—´
- `visits_created_at_idx`: è®¿é—®æ—¶é—´
- `visits_country_code_created_at_idx`: å›½å®¶ä»£ç  + è®¿é—®æ—¶é—´
- `visits_region_code_created_at_idx`: åœ°åŒºä»£ç  + è®¿é—®æ—¶é—´
- `visits_device_type_created_at_idx`: è®¾å¤‡ç±»å‹ + è®¿é—®æ—¶é—´
- `visits_browser_name_created_at_idx`: æµè§ˆå™¨åç§° + è®¿é—®æ—¶é—´
- `visits_os_name_created_at_idx`: æ“ä½œç³»ç»Ÿåç§° + è®¿é—®æ—¶é—´

### å®‰å…¨ç­–ç•¥ (RLS)

- **ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„é“¾æ¥**
- **å…¬å¼€é“¾æ¥æ‰€æœ‰äººå¯è§**
- **åªæœ‰é“¾æ¥æ‰€æœ‰è€…å¯ä»¥æŸ¥çœ‹è®¿é—®è®°å½•**
- **ä»»ä½•äººå¯ä»¥ä¸ºå…¬å¼€æˆ–è‡ªå·±çš„é“¾æ¥æ’å…¥è®¿é—®è®°å½•**

### æ•°æ®åº“å‡½æ•°

#### `increment_visits(row_id uuid)`
å¢åŠ é“¾æ¥è®¿é—®æ¬¡æ•°è®¡æ•°å™¨

#### `analytics_time(scope, start_at, end_at, bucket, p_link_id)`
æŒ‰æ—¶é—´ç»´åº¦ï¼ˆå°æ—¶/å¤©ï¼‰ç»Ÿè®¡ PV/UV

- `scope`: 'global' | 'user' | 'link'
- `bucket`: 'hour' | 'day'

#### `analytics_region(scope, dimension, start_at, end_at, p_link_id, limit_n)`
æŒ‰åœ°åŸŸç»´åº¦ç»Ÿè®¡è®¿é—®é‡

- `dimension`: 'country' | 'region' | 'city'

#### `analytics_device(scope, dimension, start_at, end_at, p_link_id, limit_n)`
æŒ‰è®¾å¤‡ç»´åº¦ç»Ÿè®¡è®¿é—®é‡

- `dimension`: 'device' | 'browser' | 'os'

#### `analytics_referrer(scope, start_at, end_at, p_link_id, limit_n)`
æŒ‰æ¥æºç»Ÿè®¡è®¿é—®é‡

## åº”ç”¨æ¶æ„

### è¯·æ±‚å¤„ç†æµç¨‹

1. **ä¸­é—´ä»¶å±‚ (`proxy.ts`)**:
   - æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼ˆé™¤é™æ€èµ„æºï¼‰
   - åˆ›å»º Supabase æœåŠ¡ç«¯å®¢æˆ·ç«¯
   - éªŒè¯ç”¨æˆ·è®¤è¯çŠ¶æ€
   - ä¿æŠ¤å—ä¿æŠ¤è·¯ç”±ï¼ˆå¦‚ `/dashboard`ï¼‰
   - ç®¡ç†è®¤è¯ cookies çš„åŒæ­¥

2. **è·¯ç”±å±‚**:
   - **`app/[shortCode]/route.ts`**: å¤„ç†çŸ­é“¾é‡å®šå‘å’Œè®¿é—®è®°å½•
   - **`app/auth/callback/route.ts`**: å¤„ç† OAuth å›è°ƒ
   - **é¡µé¢è·¯ç”±**: ä½¿ç”¨ Next.js App Router æ¸²æŸ“é¡µé¢

3. **Server Actions å±‚ (`app/actions.ts`)**:
   - å¤„ç†è¡¨å•æäº¤å’Œæ•°æ®æ“ä½œ
   - åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œé¿å…å®¢æˆ·ç«¯æš´éœ²æ•æ„Ÿé€»è¾‘
   - è‡ªåŠ¨å¤„ç†è®¤è¯å’Œæˆæƒ

4. **æ•°æ®è®¿é—®å±‚**:
   - **Supabase å®¢æˆ·ç«¯**: æä¾›ç±»å‹å®‰å…¨çš„æ•°æ®åº“è®¿é—®
   - **æ•°æ®åº“å‡½æ•°**: åœ¨ PostgreSQL ä¸­å®ç°çš„å¤æ‚åˆ†æé€»è¾‘
   - **RLS ç­–ç•¥**: ç¡®ä¿æ•°æ®å®‰å…¨éš”ç¦»

### è®¤è¯æµç¨‹

1. ç”¨æˆ·ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼ˆ`auth-buttons.tsx`ï¼‰
2. é‡å®šå‘åˆ° Supabase Auth æä¾›çš„ OAuth é¡µé¢
3. ç”¨æˆ·æˆæƒåï¼Œé‡å®šå‘åˆ° `/auth/callback`
4. å›è°ƒå¤„ç†å®Œæˆåï¼Œç”¨æˆ·è·å¾—è®¤è¯ session
5. ä¸­é—´ä»¶åœ¨åç»­è¯·æ±‚ä¸­éªŒè¯ session
6. å—ä¿æŠ¤è·¯ç”±ï¼ˆå¦‚ `/dashboard`ï¼‰ä»…åœ¨ç”¨æˆ·å·²è®¤è¯æ—¶å¯è®¿é—®

### æ•°æ®æµ

- **åˆ›å»ºçŸ­é“¾**: ç”¨æˆ·è¡¨å• â†’ Server Actions â†’ Supabase â†’ PostgreSQL â†’ RLS éªŒè¯ â†’ æ’å…¥æ•°æ®
- **è®¿é—®çŸ­é“¾**: çŸ­é“¾è¯·æ±‚ â†’ `route.ts` â†’ æŸ¥è¯¢é“¾æ¥ â†’ è®°å½•è®¿é—® â†’ IP/UA è§£æ â†’ åœ°ç†ä½ç½®æŸ¥è¯¢ â†’ é‡å®šå‘
- **æ•°æ®åˆ†æ**: ç”¨æˆ·è¯·æ±‚ â†’ åˆ†æé¡µé¢ â†’ å·¥å…·å‡½æ•° â†’ æ•°æ®åº“å‡½æ•° â†’ èšåˆæŸ¥è¯¢ â†’ RLS è¿‡æ»¤ â†’ è¿”å›ç»“æœ

## æ„å»ºå’Œè¿è¡Œ

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20
- pnpm >= 8

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼ˆåŸºäº `example.env`ï¼‰ï¼š

```env
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY=your_supabase_anon_key
```

**è·å– Supabase é…ç½®**:
1. åœ¨ [Supabase](https://supabase.com) åˆ›å»ºæ–°é¡¹ç›®
2. è¿›å…¥é¡¹ç›® Settings â†’ API
3. å¤åˆ¶ Project URL å’Œ anon/public key
4. å°†è¿™äº›å€¼å¡«å…¥ `.env.local` æ–‡ä»¶

**ç¯å¢ƒå˜é‡è¯´æ˜**:
- `NEXT_PUBLIC_SUPABASE_URL`: Supabase é¡¹ç›® URL
- `NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY`: Supabase é¡¹ç›®çš„åŒ¿å/å…¬å¼€å¯†é’¥ï¼ˆç”¨äºå®¢æˆ·ç«¯è®¿é—®ï¼‰

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### æ•°æ®åº“åˆå§‹åŒ–

åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­æ‰§è¡Œ `supabase/schema.sql` æ–‡ä»¶å†…å®¹ï¼Œè¯¥æ–‡ä»¶åŒ…å«ï¼š

1. **æ‰©å±•**: pgcryptoï¼ˆç”¨äº UUID ç”Ÿæˆï¼‰
2. **è¡¨**: `links` å’Œ `visits` è¡¨åŠå…¶ç´¢å¼•
3. **RLS ç­–ç•¥**: è¡Œçº§å®‰å…¨ç­–ç•¥ï¼Œç¡®ä¿æ•°æ®éš”ç¦»
4. **æ•°æ®åº“å‡½æ•°**: åˆ†æç›¸å…³å‡½æ•°ï¼ˆ`analytics_time`, `analytics_region`, `analytics_device`, `analytics_referrer`ï¼‰
5. **æƒé™**: æˆäºˆ `anon` å’Œ `authenticated` è§’è‰²çš„è®¿é—®æƒé™

**æ³¨æ„äº‹é¡¹**:
- ç¡®ä¿åœ¨ Supabase é¡¹ç›®ä¸­å¯ç”¨ Email Auth æˆ–å…¶ä»–è®¤è¯æ–¹å¼
- RLS ç­–ç•¥ä¾èµ–äº Supabase Auth çš„ `auth.uid()` å‡½æ•°
- æ‰§è¡Œå‰è¯·å¤‡ä»½ç°æœ‰æ•°æ®åº“ï¼ˆå¦‚æœå·²æœ‰æ•°æ®ï¼‰

**æ›´å¤šç»†èŠ‚å‚è€ƒ**: [supabase/README.md](supabase/README.md)

### å¼€å‘æ¨¡å¼

```bash
pnpm dev
```

è®¿é—® http://localhost:3000

### ç”Ÿäº§æ„å»º

```bash
pnpm build
pnpm start
```

### ä»£ç æ£€æŸ¥

```bash
# è¿è¡Œ ESLint
pnpm lint

# è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
pnpm lint:fix
```

## å¼€å‘è§„èŒƒ

### Git æäº¤è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

- `feat:` æ–°åŠŸèƒ½
- `fix:` ä¿®å¤ bug
- `docs:` æ–‡æ¡£æ›´æ–°
- `style:` ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor:` é‡æ„
- `perf:` æ€§èƒ½ä¼˜åŒ–
- `test:` æµ‹è¯•
- `chore:` æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

ç¤ºä¾‹ï¼š
```bash
git commit -m "feat: æ·»åŠ çŸ­é“¾è¿‡æœŸæ—¶é—´åŠŸèƒ½"
git commit -m "fix: ä¿®å¤ä»ªè¡¨ç›˜æ•°æ®åˆ·æ–°é—®é¢˜"
```

### Git Hooks

é¡¹ç›®é…ç½®äº†ä»¥ä¸‹ Git Hooksï¼ˆé€šè¿‡ `simple-git-hooks`ï¼‰ï¼š

- **pre-commit**: è¿è¡Œ `lint-staged`ï¼Œè‡ªåŠ¨ä¿®å¤ lint é—®é¢˜
- **commit-msg**: è¿è¡Œ `commitlint`ï¼ŒéªŒè¯æäº¤ä¿¡æ¯æ ¼å¼

### ä»£ç é£æ ¼

- **TypeScript**: ä¸¥æ ¼æ¨¡å¼å¼€å¯ï¼ˆ`strict: true`ï¼‰ï¼Œä½¿ç”¨ ES2017 ç›®æ ‡
- **ESLint**: ä½¿ç”¨ `eslint-config-next` é…ç½®ï¼Œæ”¯æŒ Core Web Vitals å’Œ TypeScript è§„åˆ™
- **Tailwind CSS**: ä½¿ç”¨ Tailwind CSS 4.0ï¼Œé…åˆ shadcn/ui ç»„ä»¶åº“
  - ä½¿ç”¨ CSS å˜é‡å®ç°ä¸»é¢˜åˆ‡æ¢
  - åŸºç¡€é¢œè‰²ä½¿ç”¨ neutral è‰²ç³»
  - æ”¯æŒæš—è‰²æ¨¡å¼ï¼ˆé€šè¿‡ next-themesï¼‰
  - é…ç½®æ–¹å¼ï¼šåœ¨ `app/globals.css` ä¸­ä½¿ç”¨ `@theme inline` è¯­æ³•é…ç½®ï¼Œæ— éœ€ç‹¬ç«‹çš„ `tailwind.config.ts` æ–‡ä»¶
- **shadcn/ui**:
  - é£æ ¼: New York
  - ä½¿ç”¨ RSC (React Server Components)
  - å›¾æ ‡åº“: lucide-react
  - è·¯å¾„åˆ«å: `@/components`, `@/lib`, `@/utils`
- **ç»„ä»¶é£æ ¼**: å‡½æ•°å¼ç»„ä»¶ï¼Œä½¿ç”¨ React Hooks
- **æ–‡ä»¶å‘½å**:
  - ç»„ä»¶æ–‡ä»¶ä½¿ç”¨ PascalCaseï¼ˆå¦‚ `link-card.tsx`ï¼‰
  - å·¥å…·å‡½æ•°æ–‡ä»¶ä½¿ç”¨ kebab-caseï¼ˆå¦‚ `utils.ts`ï¼‰
  - è·¯ç”±æ–‡ä»¶å¤¹ä½¿ç”¨ kebab-caseï¼ˆå¦‚ `visits-chart-section.tsx`ï¼‰
- **å¯¼å…¥è·¯å¾„**: ä½¿ç”¨è·¯å¾„åˆ«å `@/` æŒ‡å‘é¡¹ç›®æ ¹ç›®å½•
- **å­—ä½“**:
  - æ ‡é¢˜å­—ä½“: Outfit (`--font-heading`)
  - æ­£æ–‡å­—ä½“: Work Sans (`--font-body`)

### Server Actions

é¡¹ç›®ä½¿ç”¨ Next.js Server Actions å¤„ç†è¡¨å•æäº¤å’Œæ•°æ®æ“ä½œï¼š

- **createLink**: åˆ›å»ºçŸ­é“¾ï¼ˆåœ¨ `app/actions.ts`ï¼‰
- **updateLink**: æ›´æ–°é“¾æ¥ä¿¡æ¯
- **deleteLink**: åˆ é™¤é“¾æ¥
- **updateLinkState**: æ›´æ–°é“¾æ¥å…¬å¼€çŠ¶æ€

æ‰€æœ‰ Server Actions éƒ½ä¼šï¼š
1. éªŒè¯ç”¨æˆ·èº«ä»½
2. ä½¿ç”¨ Zod éªŒè¯è¾“å…¥æ•°æ®
3. ä½¿ç”¨ Supabase å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®åº“æ“ä½œ
4. è°ƒç”¨ `revalidatePath` åˆ·æ–°ç¼“å­˜

### å®‰å…¨æœ€ä½³å®è·µ

- **Row Level Security (RLS)**: æ‰€æœ‰æ•°æ®åº“è¡¨éƒ½å¯ç”¨äº† RLS
- **è¾“å…¥éªŒè¯**: ä½¿ç”¨ Zod è¿›è¡Œä¸¥æ ¼çš„æ•°æ®éªŒè¯
- **SQL æ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨ Supabase å®¢æˆ·ç«¯ï¼Œè‡ªåŠ¨é˜²æ­¢ SQL æ³¨å…¥
- **XSS é˜²æŠ¤**: React é»˜è®¤çš„ XSS é˜²æŠ¤æœºåˆ¶
- **å®‰å…¨å¤´**: Next.js é…ç½®äº†å®‰å…¨ç›¸å…³çš„ HTTP å¤´

### ä¸­é—´ä»¶å¼€å‘

é¡¹ç›®ä¸­ä½¿ç”¨ Next.js ä¸­é—´ä»¶ï¼ˆ`proxy.ts`ï¼‰å¤„ç†è®¤è¯å’Œè·¯ç”±ä¿æŠ¤ï¼š

**æœ€ä½³å®è·µ**:
- ä½¿ç”¨ `@supabase/ssr` çš„ `createServerClient` åˆ›å»ºæœåŠ¡ç«¯å®¢æˆ·ç«¯
- ç¡®ä¿åœ¨è¯·æ±‚å’Œå“åº”ä¸­éƒ½åŒæ­¥ cookies
- ä½¿ç”¨ matcher é…ç½®ç²¾ç¡®æ§åˆ¶éœ€è¦åŒ¹é…çš„è·¯ç”±
- é‡å®šå‘æ—¶ä½¿ç”¨ `request.nextUrl.clone()` åˆ›å»ºæ–°çš„ URL å¯¹è±¡

**æ³¨æ„äº‹é¡¹**:
- ä¸­é—´ä»¶åœ¨æ¯ä¸ªè¯·æ±‚æ—¶éƒ½ä¼šæ‰§è¡Œï¼Œä¿æŒé€»è¾‘ç®€æ´é«˜æ•ˆ
- é¿å…åœ¨ä¸­é—´ä»¶ä¸­æ‰§è¡Œé‡é‡çº§æ“ä½œï¼ˆå¦‚æ•°æ®åº“æŸ¥è¯¢ï¼‰
- é™æ€èµ„æºåº”è¯¥è¢«æ’é™¤åœ¨ä¸­é—´ä»¶å¤„ç†ä¹‹å¤–

## å…³é”®æ–‡ä»¶è¯´æ˜

### `proxy.ts`
Next.js ä¸­é—´ä»¶ï¼Œå¤„ç†è®¤è¯å’Œè·¯ç”±ä¿æŠ¤ï¼š

1. åˆ›å»º Supabase æœåŠ¡ç«¯å®¢æˆ·ç«¯ï¼Œç®¡ç†è®¤è¯çŠ¶æ€
2. åŒæ­¥ cookies åˆ°è¯·æ±‚å’Œå“åº”å¯¹è±¡
3. ä¿æŠ¤ `/dashboard` è·¯ç”±ï¼Œæœªç™»å½•ç”¨æˆ·é‡å®šå‘åˆ°é¦–é¡µ
4. ä½¿ç”¨ matcher é…ç½®åŒ¹é…æ‰€æœ‰è·¯ç”±ï¼ˆé™¤é™æ€èµ„æºï¼‰

**é…ç½®çš„ matcher**:
- æ’é™¤ `_next/static`ã€`_next/image`ã€`favicon.ico` å’Œé™æ€å›¾ç‰‡æ–‡ä»¶
- åŒ¹é…å…¶ä»–æ‰€æœ‰è·¯ç”±

### `app/[shortCode]/route.ts`
å¤„ç†çŸ­é“¾é‡å®šå‘çš„æ ¸å¿ƒé€»è¾‘ï¼š

1. æ ¹æ®çŸ­ç æŸ¥è¯¢é“¾æ¥
2. æå–è®¿é—®è€…ä¿¡æ¯ï¼ˆIPã€User-Agentã€Refererï¼‰
3. è§£æ User-Agent è·å–è®¾å¤‡ã€æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿä¿¡æ¯
4. é€šè¿‡ ip-api.com è·å–åœ°ç†ä½ç½®ä¿¡æ¯ï¼ˆå¸¦ç¼“å­˜ï¼‰
5. æ’å…¥è®¿é—®è®°å½•å¹¶å¢åŠ è®¿é—®è®¡æ•°
6. é‡å®šå‘åˆ°åŸå§‹ URL

### `app/actions.ts`
Server Actions å®šä¹‰ï¼Œå¤„ç†æ‰€æœ‰æ•°æ®æ“ä½œï¼š

- ä½¿ç”¨ Zod schema éªŒè¯è¾“å…¥
- å®ç°çŸ­ç å†²çªé‡è¯•æœºåˆ¶ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- ä½¿ç”¨ `nanoid(6)` ç”Ÿæˆ 6 ä½çŸ­ç 
- è‡ªåŠ¨åˆ·æ–°ç›¸å…³é¡µé¢ç¼“å­˜

**å¯ç”¨çš„ Server Actions**:
- `createLink(formData)`: åˆ›å»ºæ–°çŸ­é“¾
- `updateLink(linkId, formData)`: æ›´æ–°é“¾æ¥ä¿¡æ¯
- `deleteLink(linkId)`: åˆ é™¤é“¾æ¥
- `updateLinkState(linkId, isPublic)`: æ›´æ–°é“¾æ¥å…¬å¼€çŠ¶æ€

### `utils/supabase/client.ts` & `server.ts`
Supabase å®¢æˆ·ç«¯é…ç½®ï¼š

- **client.ts**: æµè§ˆå™¨ç«¯å®¢æˆ·ç«¯ï¼ˆä½¿ç”¨ `@supabase/ssr`ï¼‰
- **server.ts**: æœåŠ¡ç«¯å®¢æˆ·ç«¯ï¼ˆç”¨äº Server Actions å’Œè·¯ç”±å¤„ç†ç¨‹åºï¼‰

### `lib/analytics/types.ts`
æ•°æ®åˆ†æç±»å‹å®šä¹‰ï¼š

- `DateType`: '24h' | '7d' | '30d' | '90d'
- `RegionDim`: 'country' | 'region' | 'city'
- `DeviceDim`: 'device' | 'browser' | 'os'
- `AnalyticsTimeRow`: æ—¶é—´ç»´åº¦åˆ†ææ•°æ®ï¼ˆbucket_start, pv, uvï¼‰
- `AnalyticsTopRow`: é¡¶éƒ¨åˆ—è¡¨æ•°æ®ï¼ˆname, clicksï¼‰

### `lib/analytics/utils.ts`
æ•°æ®åˆ†æå·¥å…·å‡½æ•°ï¼š

- `normalizeDateType(value)`: è§„èŒƒåŒ–æ—¥æœŸç±»å‹å‚æ•°
- `normalizeRegionDim(value)`: è§„èŒƒåŒ–åœ°åŒºç»´åº¦å‚æ•°
- `normalizeDeviceDim(value)`: è§„èŒƒåŒ–è®¾å¤‡ç»´åº¦å‚æ•°
- `getDateWindow(dateType)`: æ ¹æ®æ—¥æœŸç±»å‹è®¡ç®—æ—¶é—´çª—å£å’Œ bucketï¼ˆhour/dayï¼‰
- `buildAnalyticsUrl(params)`: æ„å»ºåˆ†æé¡µé¢ URLï¼ŒåŒ…å«æ‰€æœ‰æŸ¥è¯¢å‚æ•°

è¿™äº›å·¥å…·å‡½æ•°ç”¨äºæ•°æ®åˆ†æé¡µé¢ï¼Œå°†ç”¨æˆ·ç•Œé¢å‚æ•°è½¬æ¢ä¸ºæ•°æ®åº“å‡½æ•°è°ƒç”¨æ‰€éœ€çš„æ ¼å¼ã€‚

### å›¾è¡¨ç»„ä»¶æ¶æ„

é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–çš„å›¾è¡¨ç»„ä»¶æ¶æ„ï¼Œæ‰€æœ‰å›¾è¡¨ç›¸å…³ç»„ä»¶ä½äº `components/ui/chart/` ç›®å½•ï¼š

**æ ¸å¿ƒç»„ä»¶**:
- **`chart.tsx`**: å›¾è¡¨ç»„ä»¶å…¥å£ï¼Œå¯¼å‡ºç±»å‹å’Œå…¬å…±ç»„ä»¶
- **`container.tsx`**: å›¾è¡¨å®¹å™¨ï¼Œæä¾›å“åº”å¼å¸ƒå±€å’Œä¸Šä¸‹æ–‡
- **`context.tsx`**: å›¾è¡¨ä¸Šä¸‹æ–‡ï¼Œç®¡ç†å›¾è¡¨é…ç½®çŠ¶æ€
- **`tooltip.tsx`**: å·¥å…·æç¤ºç»„ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰æ ·å¼
- **`legend.tsx`**: å›¾ä¾‹ç»„ä»¶ï¼Œæ˜¾ç¤ºæ•°æ®ç³»åˆ—
- **`style.tsx`**: å›¾è¡¨æ ·å¼ç®¡ç†ï¼Œä½¿ç”¨ CSS å˜é‡
- **`payload.tsx`**: æ•°æ®è½½è·å¤„ç†
- **`constants.ts`**: å›¾è¡¨å¸¸é‡å’Œä¸»é¢˜é…ç½®

**ä½¿ç”¨æ–¹å¼**:
```tsx
import { ChartContainer, ChartTooltip, ChartTooltipContent } from "@/components/ui/chart"

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
<ChartContainer config={chartConfig}>
  <YourChartComponent />
</ChartContainer>
```

**è‡ªå®šä¹‰å·¥å…·æç¤º**:
é¡¹ç›®æä¾›äº† `visits-chart-tooltip.tsx` ä½œä¸ºè®¿é—®å›¾è¡¨çš„è‡ªå®šä¹‰å·¥å…·æç¤ºç»„ä»¶ã€‚

## å¤–éƒ¨æœåŠ¡ä¾èµ–

- **Supabase**: åç«¯æœåŠ¡ï¼ˆPostgreSQLã€è®¤è¯ã€å­˜å‚¨ï¼‰
- **ip-api.com**: IP åœ°ç†ä½ç½®æŸ¥è¯¢ï¼ˆå…è´¹ï¼Œå¸¦ç¼“å­˜å’Œè¶…æ—¶æ§åˆ¶ï¼‰

## å·²çŸ¥é™åˆ¶å’Œæ³¨æ„äº‹é¡¹

1. **çŸ­ç å†²çª**: ä½¿ç”¨ 6 ä½ nanoidï¼Œç†è®ºä¸Šå¯èƒ½å†²çªï¼ˆæ¦‚ç‡æä½ï¼‰ï¼Œä»£ç ä¸­å®ç°äº†é‡è¯•æœºåˆ¶ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
2. **åœ°ç†ä½ç½®æŸ¥è¯¢**: ä½¿ç”¨å…è´¹ç‰ˆ ip-api.comï¼Œæœ‰è¯·æ±‚é¢‘ç‡é™åˆ¶ï¼ˆçº¦ 45 æ¬¡/åˆ†é’Ÿï¼‰ï¼Œå·²å®ç°ç¼“å­˜æœºåˆ¶å‡å°‘è°ƒç”¨
3. **éšç§ä¿æŠ¤**: å†…ç½‘ IPï¼ˆå¦‚ 192.168.x.xã€10.x.x.xã€172.16-31.x.xã€::1ï¼‰ä¸ä¼šè¢«ç”¨äºåœ°ç†ä½ç½®æŸ¥è¯¢
4. **ç¯å¢ƒå˜é‡**: å¿…é¡»æ­£ç¡®é…ç½® Supabase URL å’Œå¯†é’¥æ‰èƒ½è¿è¡Œ
5. **ä¸­é—´ä»¶é™åˆ¶**: Next.js ä¸­é—´ä»¶æœ‰ 50KB çš„ä»£ç å¤§å°é™åˆ¶ï¼Œå½“å‰å®ç°å·²ä¼˜åŒ–åœ¨æ­¤èŒƒå›´å†…
6. **è®¤è¯ä¼šè¯**: Supabase Auth session é»˜è®¤æœ‰æ•ˆæœŸï¼Œéœ€è¦å®šæœŸåˆ·æ–°ï¼ˆé€šè¿‡ä¸­é—´ä»¶è‡ªåŠ¨å¤„ç†ï¼‰
7. **IP åœ°å€è§£æ**: ä»…è§£æ IPv4 åœ°å€è¿›è¡Œåœ°ç†ä½ç½®æŸ¥è¯¢ï¼ŒIPv6 åœ°å€ä¼šè¢«è·³è¿‡
8. **å¼€å‘ç¯å¢ƒ**: å¼€å‘ç¯å¢ƒä¸‹ï¼Œå†…ç½‘ IP åœ°å€ä¸ä¼šè§¦å‘åœ°ç†ä½ç½®æŸ¥è¯¢ï¼ˆè¿”å›ç©ºç»“æœï¼‰

## æ‰©å±•å»ºè®®

- æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- å®ç°çŸ­ç è‡ªå®šä¹‰åŠŸèƒ½
- æ·»åŠ é“¾æ¥äºŒç»´ç ç”Ÿæˆå’Œä¸‹è½½
- æ”¯æŒæ‰¹é‡å¯¼å…¥/å¯¼å‡ºé“¾æ¥
- æ·»åŠ æ›´å¤šæ•°æ®åˆ†æç»´åº¦ï¼ˆå¦‚æ—¶é—´åˆ†å¸ƒçƒ­å›¾ï¼‰
- å®ç°é“¾æ¥è®¿é—®é€Ÿç‡é™åˆ¶
- æ·»åŠ  Webhook æ”¯æŒè®¿é—®é€šçŸ¥
- æ”¯æŒå¤šè¯­è¨€å›½é™…åŒ–

## å¼€å‘å’Œè°ƒè¯•å»ºè®®

### æœ¬åœ°å¼€å‘

- ä½¿ç”¨ `pnpm dev` å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæ”¯æŒçƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰
- ä¿®æ”¹ `proxy.ts` åéœ€è¦é‡å¯å¼€å‘æœåŠ¡å™¨æ‰èƒ½ç”Ÿæ•ˆ
- æ•°æ®åº“ Schema ä¿®æ”¹éœ€è¦åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­æ‰‹åŠ¨æ‰§è¡Œ
- Tailwind CSS 4.0 é…ç½®åœ¨ `app/globals.css` ä¸­ä¿®æ”¹ï¼Œæ— éœ€é‡å¯å¼€å‘æœåŠ¡å™¨

### è°ƒè¯•æŠ€å·§

- **Server Actions è°ƒè¯•**: åœ¨ Server Actions ä¸­ä½¿ç”¨ `console.log` è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œä¼šæ˜¾ç¤ºåœ¨æœåŠ¡ç«¯ç»ˆç«¯
- **ä¸­é—´ä»¶è°ƒè¯•**: åœ¨ `proxy.ts` ä¸­ä½¿ç”¨ `console.log` è°ƒè¯•è®¤è¯æµç¨‹
- **æ•°æ®åº“è°ƒè¯•**: ä½¿ç”¨ Supabase Dashboard çš„ Table Editor å’Œ SQL Editor ç›´æ¥æŸ¥çœ‹æ•°æ®
- **å®¢æˆ·ç«¯è°ƒè¯•**: ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ç½‘ç»œè¯·æ±‚å’Œæ§åˆ¶å°æ—¥å¿—

### æ€§èƒ½ä¼˜åŒ–

- **çŸ­ç æŸ¥è¯¢**: ä½¿ç”¨ `links_short_code_idx` ç´¢å¼•ç¡®ä¿å¿«é€ŸæŸ¥è¯¢
- **è®¿é—®è®°å½•**: æ‰¹é‡æ’å…¥è®¿é—®è®°å½•ï¼Œä½¿ç”¨ `Promise.allSettled` ç¡®ä¿ä¸é˜»å¡é‡å®šå‘
- **åœ°ç†ä½ç½®ç¼“å­˜**: ä½¿ç”¨å…¨å±€ç¼“å­˜å‡å°‘ ip-api.com è°ƒç”¨æ¬¡æ•°
- **æ•°æ®å¯è§†åŒ–**: ä½¿ç”¨ Recharts çš„è™šæ‹ŸåŒ–åŠŸèƒ½å¤„ç†å¤§é‡æ•°æ®
- **å›¾è¡¨ç»„ä»¶**: ä½¿ç”¨æ¨¡å—åŒ–æ¶æ„ï¼ŒæŒ‰éœ€åŠ è½½å›¾è¡¨ç›¸å…³ç»„ä»¶

### å¸¸è§é—®é¢˜

1. **çŸ­ç é‡å®šå‘å¤±è´¥**: æ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨è¯¥çŸ­ç ï¼Œæˆ–æ˜¯å¦å·²è¿‡æœŸ
2. **è®¤è¯å¤±è´¥**: æ£€æŸ¥ Supabase URL å’Œå¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®
3. **åœ°ç†ä½ç½®æŸ¥è¯¢å¤±è´¥**: æ£€æŸ¥ ip-api.com æ˜¯å¦å¯è®¿é—®ï¼Œæˆ–æ˜¯å¦è¾¾åˆ°é€Ÿç‡é™åˆ¶
4. **ä¸­é—´ä»¶é”™è¯¯**: æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®ï¼Œcookies æ˜¯å¦æ­£å¸¸è®¾ç½®
5. **Tailwind æ ·å¼ä¸ç”Ÿæ•ˆ**: ç¡®è®¤ `app/globals.css` ä¸­æ­£ç¡®å¯¼å…¥äº† `tailwindcss`

## è®¸å¯è¯

MIT License